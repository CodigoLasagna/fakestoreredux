datasource db {
	provider = "mysql"
	url = env("DATABASE_URL")
}

generator client {
	provider = "prisma-client-js"
}

model User {
	id Int @id @default(autoincrement())
	name String
	email  String @unique
	pass   String
	cartId Int? @unique
	cart Cart?  @relation(fields: [cartId], references: [id])
	Orders Order[]
}

model Product {
	id Int @id @default(autoincrement())
	title String 
	price Float
	description String
	category String
	image String
	
	itemsCart ItemCart[]
	itemsOrder ItemOrder[]
}

model ItemCart {
	id Int @id @default(autoincrement())
	quantity Int
	
	productId Int
	product Product @relation(fields: [productId], references: [id])
	cartId Int
	cart Cart @relation(fields: [cartId], references: [id])
}

model ItemOrder {
	id Int @id @default(autoincrement())
	quantity Int
	
	productId Int
	product Product @relation(fields: [productId], references: [id])
	orderId Int
	order Order @relation(fields: [orderId], references: [id])
}

model Cart {
	id Int @id @default(autoincrement())
	items ItemCart[]
	user User?
}

model Order{
	id Int @id @default(autoincrement())
	items ItemOrder[]
	total Float
	name String
	address String
	paymentMethod String
	date DateTime
	userId Int
	user User @relation(fields: [userId], references: [id])
}
